<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dist√¢ncia de Hellinger Interativa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      .tab-button {
        transition: all 0.3s ease;
      }
      .tab-button.active {
        border-color: #0d9488; /* teal-600 */
        color: #0d9488;
        font-weight: 600;
      }
      .content-section {
        display: none;
      }
      .content-section.active {
        display: block;
      }
      .canvas-container {
        position: relative;
        width: 100%;
        max-width: 600px;
        height: 400px;
        margin-left: auto;
        margin-right: auto;
        background-color: #f8fafc; /* slate-50 */
        border-radius: 0.5rem; /* rounded-lg */
        border: 1px solid #e2e8f0; /* slate-200 */
        box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: center;
        align-items: center;
      }
      #hellingerChart {
        display: block;
        width: 100%;
        height: 100%;
      }
      .formula {
        font-family: "Consolas", "Courier New", Courier, monospace;
        background-color: #f1f5f9; /* slate-100 */
        padding: 0.75rem; /* p-3 */
        border-radius: 0.25rem; /* rounded */
        font-size: 0.875rem; /* text-sm */
        color: #1e293b; /* slate-800 */
        overflow-x: auto;
        white-space: pre;
      }
      .dist-input {
        width: 100%;
        max-width: 120px;
        padding: 0.5rem;
        border: 1px solid #cbd5e1;
        border-radius: 0.375rem;
      }
      .error-message {
        color: #dc2626; /* red-600 */
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }
    </style>
  </head>
  <body class="bg-slate-100 text-slate-700 antialiased">
    <div class="bg-teal-600 text-white shadow-md">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex items-center">
                <a href="index.html" class="text-xl font-bold hover:text-teal-200 transition-colors">P√°gina Inicial</a>
            </div>
            <div class="relative">
                <button id="metrics-menu-button" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-teal-700 focus:outline-none focus:bg-teal-700 transition-colors">
                    M√©tricas de Dist√¢ncia <span class="ml-1">&#9662;</span>
                </button>
                <div id="metrics-dropdown" class="hidden origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none py-1 z-50">
                    <a href="chebyshevDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Chebyshev</a>
                    <a href="correlationDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Correla√ß√£o</a>
                    <a href="cosineDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. Cosseno</a>
                    <a href="diceDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. Dice</a>
                    <a href="euclidianDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. Euclidiana</a>
                    <a href="hammingDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Hamming</a>
                    <a href="hellingerDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Hellinger</a>
                    <a href="jaccardDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Jaccard</a>
                    <a href="mahalanobisDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Mahalanobis</a>
                    <a href="manhattanDistance.html" class="block px-4 py-2 text-sm text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dist. de Manhattan</a>
                </div>
            </div>
        </div>
    </div>
</div>
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl">
      <header class="text-center mb-8">
        <h1 class="text-4xl font-bold text-teal-600">
          üåä Dist√¢ncia de Hellinger Interativa üåä
        </h1>
      </header>

      <nav class="mb-8 flex flex-wrap justify-center gap-2 sm:gap-4">
        <button
          class="tab-button active py-2 px-4 border-b-2 border-transparent hover:border-teal-500 hover:text-teal-600 rounded-t-md"
          data-tab="definicao"
        >
          Defini√ß√£o
        </button>
        <button
          class="tab-button py-2 px-4 border-b-2 border-transparent hover:border-teal-500 hover:text-teal-600 rounded-t-md"
          data-tab="formula"
        >
          F√≥rmula e Termos
        </button>
        <button
          class="tab-button py-2 px-4 border-b-2 border-transparent hover:border-teal-500 hover:text-teal-600 rounded-t-md"
          data-tab="intuicao"
        >
          Intui√ß√£o e Vantagens
        </button>
        <button
          class="tab-button py-2 px-4 border-b-2 border-transparent hover:border-teal-500 hover:text-teal-600 rounded-t-md"
          data-tab="aplicacoes"
        >
          Aplica√ß√µes Pr√°ticas
        </button>
        <button
          class="tab-button py-2 px-4 border-b-2 border-transparent hover:border-teal-500 hover:text-teal-600 rounded-t-md"
          data-tab="visualizador"
        >
          Visualizador Interativo
        </button>
      </nav>

      <main>
        <section
          id="definicao"
          class="content-section active bg-white p-6 rounded-lg shadow-md"
        >
          <h2 class="text-2xl font-semibold text-teal-600 mb-4">
            O que √© a Dist√¢ncia de Hellinger?
          </h2>
          <p class="mb-4 leading-relaxed">
            A <strong>Dist√¢ncia de Hellinger</strong> √© uma m√©trica para
            quantificar a similaridade entre duas distribui√ß√µes de
            probabilidade. Ela √© particularmente √∫til quando lidamos com
            distribui√ß√µes discretas ou cont√≠nuas, e oferece uma medida sim√©trica
            que varia entre 0 (distribui√ß√µes id√™nticas) e 1 (distribui√ß√µes
            totalmente distintas). Sua robustez a pequenas perturba√ß√µes e sua
            capacidade de capturar a sobreposi√ß√£o entre distribui√ß√µes a tornam
            uma ferramenta valiosa em diversas √°reas.
          </p>
          <p class="mb-3 leading-relaxed">
            Diferentemente de outras m√©tricas, como a diverg√™ncia de
            Kullback-Leibler, a Hellinger Distance √© sim√©trica e finita, o que
            significa que $D_H(P, Q) = D_H(Q, P)$ e seu valor m√°ximo √© sempre 1.
            Isso a torna mais est√°vel para compara√ß√µes e na detec√ß√£o de mudan√ßas
            substanciais entre distribui√ß√µes.
          </p>
          <p class="leading-relaxed">
            Imagine que voc√™ tem duas "pilhas" de areia, cada uma representando
            uma distribui√ß√£o de probabilidade. A Dist√¢ncia de Hellinger mede o
            qu√£o f√°cil ou dif√≠cil √© transformar uma pilha na outra, levando em
            conta a quantidade de sobreposi√ß√£o entre elas. Quanto maior a
            sobreposi√ß√£o, menor a dist√¢ncia de Hellinger.
          </p>
        </section>

        <section
          id="formula"
          class="content-section bg-white p-6 rounded-lg shadow-md"
        >
          <h2 class="text-2xl font-semibold text-teal-600 mb-4">
            üí° F√≥rmula da Dist√¢ncia de Hellinger e Seus Termos
          </h2>
          <p class="mb-4 leading-relaxed">
            A seguir, detalhamos a express√£o matem√°tica da Dist√¢ncia de
            Hellinger para distribui√ß√µes discretas e cont√≠nuas. Entender os
            termos √© crucial para compreender como essa medida avalia a
            similaridade.
          </p>

          <div class="mb-6">
            <h3 class="text-xl font-medium text-slate-700 mb-2">
              Para Distribui√ß√µes de Probabilidade Discretas
            </h3>
            <p class="mb-2">
              Dados duas distribui√ß√µes de probabilidade discretas, $P = (p_1,
              ..., p_k)$ e $Q = (q_1, ..., q_k)$, a Dist√¢ncia de Hellinger
              $D_H(P, Q)$ √© definida como:
            </p>
            <div class="formula">
              $$D_H(P, Q) = \frac{1}{\sqrt{2}} \sqrt{\sum_{i=1}^{k} (\sqrt{p_i}
              - \sqrt{q_i})^2}$$
            </div>
            <p class="mt-2 text-sm text-slate-500">
              O fator $\frac{1}{\sqrt{2}}$ garante que a dist√¢ncia varie entre 0
              e 1.
            </p>
          </div>

          <div class="mb-6">
            <h3 class="text-xl font-medium text-slate-700 mb-2">
              Para Distribui√ß√µes de Probabilidade Cont√≠nuas
            </h3>
            <p class="mb-2">
              Para duas distribui√ß√µes de probabilidade cont√≠nuas $P$ e $Q$ com
              fun√ß√µes de densidade de probabilidade $f_P(x)$ e $f_Q(x)$, a
              Dist√¢ncia de Hellinger √© definida como:
            </p>
            <div class="formula">
              $$D_H(P, Q) = \frac{1}{\sqrt{2}} \sqrt{\int (\sqrt{f_P(x)} -
              \sqrt{f_Q(x)})^2 dx}$$
            </div>
          </div>

          <div>
            <h3 class="text-xl font-medium text-slate-700 mb-3">
              üìù Desvendando os Termos
            </h3>
            <ul class="list-disc list-inside space-y-3 pl-2 leading-relaxed">
              <li>
                <strong>$P$ e $Q$:</strong> Representam as duas distribui√ß√µes de
                probabilidade que est√£o sendo comparadas.
              </li>
              <li>
                <strong>$p_i$ e $q_i$:</strong> S√£o as probabilidades do
                $i$-√©simo evento (ou bin) nas distribui√ß√µes discretas $P$ e $Q$,
                respectivamente. Para distribui√ß√µes cont√≠nuas, $f_P(x)$ e
                $f_Q(x)$ s√£o as fun√ß√µes de densidade de probabilidade.
              </li>
              <li>
                <strong>$\sqrt{p_i}$ e $\sqrt{q_i}$:</strong> A dist√¢ncia de
                Hellinger opera nas ra√≠zes quadradas das probabilidades, o que a
                torna sens√≠vel √† sobreposi√ß√£o.
              </li>
              <li>
                <strong>$\sum_{i=1}^{k}$:</strong> Indica a soma sobre todos os
                $k$ eventos ou bins na distribui√ß√£o discreta.
              </li>
              <li>
                <strong>$\int dx$:</strong> Indica a integral sobre todo o
                dom√≠nio para distribui√ß√µes cont√≠nuas.
              </li>
              <li>
                <strong>$\frac{1}{\sqrt{2}}$:</strong> Um fator de normaliza√ß√£o
                que garante que a dist√¢ncia m√°xima seja 1.
              </li>
            </ul>
            <p
              class="mt-4 p-3 bg-sky-50 border-l-4 border-sky-400 text-sky-700 rounded text-sm leading-relaxed"
            >
              <strong>Ess√™ncia:</strong> A Dist√¢ncia de Hellinger mede a
              similaridade entre distribui√ß√µes de probabilidade ao quantificar o
              quanto elas se sobrep√µem. Quanto maior a sobreposi√ß√£o, menor a
              dist√¢ncia, indicando maior similaridade.
            </p>
          </div>
        </section>

        <section
          id="intuicao"
          class="content-section bg-white p-6 rounded-lg shadow-md"
        >
          <h2 class="text-2xl font-semibold text-teal-600 mb-4">
            üß† Intui√ß√£o e Vantagens
          </h2>
          <p class="mb-4 leading-relaxed">
            A Dist√¢ncia de Hellinger possui caracter√≠sticas que a tornam uma
            escolha robusta para comparar distribui√ß√µes de probabilidade.
            Entenda por que ela √© t√£o valorizada em cen√°rios onde outras
            m√©tricas podem falhar.
          </p>
          <ul class="space-y-4">
            <li class="p-3 bg-slate-50 rounded-md">
              <h3 class="font-semibold text-slate-700">1. Simetria</h3>
              <p class="text-sm leading-relaxed">
                Ao contr√°rio da diverg√™ncia de Kullback-Leibler ($D_{KL}$), a
                Hellinger Distance √© sim√©trica, ou seja, $D_H(P, Q) = D_H(Q,
                P)$. Isso significa que a dist√¢ncia de P para Q √© a mesma que de
                Q para P, simplificando sua interpreta√ß√£o e uso em algoritmos
                onde a ordem de compara√ß√£o n√£o deve importar.
              </p>
            </li>
            <li class="p-3 bg-slate-50 rounded-md">
              <h3 class="font-semibold text-slate-700">2. Finita e Limitada</h3>
              <p class="text-sm leading-relaxed">
                Seu valor √© sempre entre 0 e 1. Um valor de 0 indica que as
                distribui√ß√µes s√£o id√™nticas, enquanto 1 significa que elas n√£o
                t√™m nenhuma sobreposi√ß√£o (suportes disjuntos). Essa propriedade
                facilita a interpreta√ß√£o e a compara√ß√£o de dist√¢ncias entre
                diferentes pares de distribui√ß√µes.
              </p>
            </li>
            <li class="p-3 bg-slate-50 rounded-md">
              <h3 class="font-semibold text-slate-700">
                3. Sensibilidade √† Sobreposi√ß√£o
              </h3>
              <p class="text-sm leading-relaxed">
                Por operar com as ra√≠zes quadradas das probabilidades, a
                Hellinger Distance √© mais sens√≠vel √† sobreposi√ß√£o das
                distribui√ß√µes. Ela penaliza mais as diferen√ßas onde as
                probabilidades s√£o altas e √© menos afetada por pequenas
                probabilidades (ou "caudas") onde uma distribui√ß√£o tem valores e
                a outra n√£o.
              </p>
            </li>
            <li class="p-3 bg-slate-50 rounded-md">
              <h3 class="font-semibold text-slate-700">4. Robustez</h3>
              <p class="text-sm leading-relaxed">
                √â considerada mais robusta a pequenas flutua√ß√µes ou ru√≠dos nos
                dados de probabilidade em compara√ß√£o com outras m√©tricas que
                podem ser indefinidas ou dar valores infinitos se uma das
                distribui√ß√µes tiver probabilidade zero onde a outra tem uma
                probabilidade n√£o-zero.
              </p>
            </li>
            <li class="p-3 bg-slate-50 rounded-md">
              <h3 class="font-semibold text-slate-700">
                5. Dist√¢ncia M√©trica Verdadeira
              </h3>
              <p class="text-sm leading-relaxed">
                A Dist√¢ncia de Hellinger satisfaz todos os axiomas de uma
                m√©trica: n√£o-negatividade ($D_H(P, Q) \ge 0$), identidade dos
                indistingu√≠veis ($D_H(P, Q) = 0 \iff P=Q$), simetria ($D_H(P, Q)
                = D_H(Q, P)$) e a desigualdade triangular ($D_H(P, R) \le D_H(P,
                Q) + D_H(Q, R)$). Isso a torna matematicamente bem-comportada
                para muitos algoritmos.
              </p>
            </li>
          </ul>
        </section>

        <section
          id="aplicacoes"
          class="content-section bg-white p-6 rounded-lg shadow-md"
        >
          <h2 class="text-2xl font-semibold text-teal-600 mb-4">
            üéØ Principais Aplica√ß√µes Pr√°ticas
          </h2>
          <p class="mb-6 leading-relaxed">
            A Dist√¢ncia de Hellinger, devido √†s suas propriedades robustas e
            intuitivas, √© amplamente aplicada em diversos campos que envolvem a
            compara√ß√£o de distribui√ß√µes de probabilidade.
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-slate-50 p-4 rounded-lg shadow">
              <h3 class="text-lg font-semibold text-slate-700 mb-2">
                üîÑ Compara√ß√£o de Modelos Estat√≠sticos
              </h3>
              <p class="text-sm leading-relaxed">
                Utilizada para avaliar o qu√£o bem um modelo de probabilidade se
                ajusta aos dados observados, comparando a distribui√ß√£o gerada
                pelo modelo com a distribui√ß√£o emp√≠rica dos dados.
              </p>
            </div>
            <div class="bg-slate-50 p-4 rounded-lg shadow">
              <h3 class="text-lg font-semibold text-slate-700 mb-2">
                üß¨ Gen√¥mica e Bioinform√°tica
              </h3>
              <p class="text-sm leading-relaxed">
                Na an√°lise de sequ√™ncias de DNA ou RNA, pode ser usada para
                comparar a distribui√ß√£o de frequ√™ncias de alelos ou padr√µes de
                express√£o g√™nica entre diferentes popula√ß√µes ou condi√ß√µes.
              </p>
            </div>
            <div class="bg-slate-50 p-4 rounded-lg shadow">
              <h3 class="text-lg font-semibold text-slate-700 mb-2">
                üó£Ô∏è Processamento de Linguagem Natural (PLN)
              </h3>
              <p class="text-sm leading-relaxed">
                Para medir a similaridade entre documentos, t√≥picos ou vetores
                de palavras, onde cada um √© representado como uma distribui√ß√£o
                de frequ√™ncias de termos.
              </p>
            </div>
            <div class="bg-slate-50 p-4 rounded-lg shadow">
              <h3 class="text-lg font-semibold text-slate-700 mb-2">
                üñºÔ∏è Vis√£o Computacional
              </h3>
              <p class="text-sm leading-relaxed">
                Na compara√ß√£o de histogramas de cores ou descritores de
                caracter√≠sticas de imagens para tarefas como recupera√ß√£o de
                imagem ou reconhecimento de objetos.
              </p>
            </div>
            <div class="bg-slate-50 p-4 rounded-lg shadow">
              <h3 class="text-lg font-semibold text-slate-700 mb-2">
                üìà An√°lise de S√©ries Temporais
              </h3>
              <p class="text-sm leading-relaxed">
                Para identificar mudan√ßas no comportamento de uma s√©rie
                temporal, comparando as distribui√ß√µes de probabilidade dos
                valores em diferentes janelas de tempo.
              </p>
            </div>
            <div class="bg-slate-50 p-4 rounded-lg shadow">
              <h3 class="text-lg font-semibold text-slate-700 mb-2">
                üß™ Quimiometria
              </h3>
              <p class="text-sm leading-relaxed">
                Na compara√ß√£o de espectros ou outros dados anal√≠ticos que podem
                ser interpretados como distribui√ß√µes.
              </p>
            </div>
          </div>
        </section>

        <section
          id="visualizador"
          class="content-section bg-white p-6 rounded-lg shadow-md"
        >
          <h2 class="text-2xl font-semibold text-teal-600 mb-4">
            üî¨ Visualizador Interativo da Dist√¢ncia de Hellinger
          </h2>
          <p class="mb-3 leading-relaxed">
            Experimente a Dist√¢ncia de Hellinger! Insira os valores de
            probabilidade para duas **Distribui√ß√µes Discretas (P e Q)**, cada
            uma com 3 bins. Certifique-se de que a soma das probabilidades em
            cada distribui√ß√£o seja igual a 1 (ou o mais pr√≥ximo poss√≠vel,
            considerando o arredondamento).
          </p>
          <p class="mb-6 leading-relaxed">
            O gr√°fico abaixo mostrar√° visualmente a forma de cada distribui√ß√£o.
            A Dist√¢ncia de Hellinger calculada ser√° exibida, permitindo que voc√™
            veja como as mudan√ßas nas probabilidades afetam a similaridade entre
            as distribui√ß√µes.
          </p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
            <div class="space-y-4">
              <div>
                <h3 class="text-md font-medium text-slate-700 mb-2">
                  Distribui√ß√£o P (p1, p2, p3)
                </h3>
                <div class="flex gap-2">
                  <input
                    type="number"
                    id="p1"
                    value="0.3"
                    min="0"
                    max="1"
                    step="0.01"
                    class="dist-input p-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"
                  />
                  <input
                    type="number"
                    id="p2"
                    value="0.4"
                    min="0"
                    max="1"
                    step="0.01"
                    class="dist-input p-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"
                  />
                  <input
                    type="number"
                    id="p3"
                    value="0.3"
                    min="0"
                    max="1"
                    step="0.01"
                    class="dist-input p-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"
                  />
                </div>
                <p id="sumP" class="text-sm text-slate-500 mt-1">Soma P: 1.0</p>
              </div>
              <div>
                <h3 class="text-md font-medium text-slate-700 mb-2">
                  Distribui√ß√£o Q (q1, q2, q3)
                </h3>
                <div class="flex gap-2">
                  <input
                    type="number"
                    id="q1"
                    value="0.2"
                    min="0"
                    max="1"
                    step="0.01"
                    class="dist-input p-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"
                  />
                  <input
                    type="number"
                    id="q2"
                    value="0.5"
                    min="0"
                    max="1"
                    step="0.01"
                    class="dist-input p-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"
                  />
                  <input
                    type="number"
                    id="q3"
                    value="0.3"
                    min="0"
                    max="1"
                    step="0.01"
                    class="dist-input p-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500"
                  />
                </div>
                <p id="sumQ" class="text-sm text-slate-500 mt-1">Soma Q: 1.0</p>
              </div>
              <div class="mt-4 space-y-2">
                <p class="text-md">
                  <strong>Dist. Hellinger (D<sub>H</sub>):</strong>
                </p>
                <p
                  id="hellingerDistanceResult"
                  class="font-bold text-teal-600 text-xl"
                >
                  N/A
                </p>
                <p id="hellingerError" class="error-message"></p>
              </div>
            </div>

            <div class="md:col-span-1">
              <div class="canvas-container">
                <canvas id="hellingerChart"></canvas>
              </div>
              <p class="text-xs text-center mt-2 text-slate-500">
                Representa√ß√£o gr√°fica das distribui√ß√µes P e Q.
              </p>
            </div>
          </div>
        </section>
      </main>

      <footer class="text-center mt-12 py-6 border-t border-slate-300">
        <p class="text-sm text-slate-500">
          &copy; <span id="currentYear"></span> Aplica√ß√£o Interativa da Dist. de
          Hellinger. Fins educacionais.
        </p>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".tab-button");
        const contentSections = document.querySelectorAll(".content-section");

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            tabs.forEach((t) => t.classList.remove("active"));
            tab.classList.add("active");
            const targetTab = tab.getAttribute("data-tab");
            contentSections.forEach((section) => {
              section.classList.remove("active");
              if (section.id === targetTab) {
                section.classList.add("active");
              }
            });
            if (targetTab === "visualizador") {
              updateChart();
            }
          });
        });

        document.getElementById("currentYear").textContent =
          new Date().getFullYear();

        const pInputs = [
          document.getElementById("p1"),
          document.getElementById("p2"),
          document.getElementById("p3"),
        ];
        const qInputs = [
          document.getElementById("q1"),
          document.getElementById("q2"),
          document.getElementById("q3"),
        ];
        const sumPEl = document.getElementById("sumP");
        const sumQEl = document.getElementById("sumQ");
        const hellingerDistanceResultEl = document.getElementById(
          "hellingerDistanceResult"
        );
        const hellingerErrorEl = document.getElementById("hellingerError");

        const ctx = document.getElementById("hellingerChart").getContext("2d");
        let hellingerChart;

        function calculateHellinger() {
          hellingerErrorEl.textContent = "";
          const p = pInputs.map((input) => parseFloat(input.value) || 0);
          const q = qInputs.map((input) => parseFloat(input.value) || 0);

          const sumP = p.reduce((acc, val) => acc + val, 0);
          const sumQ = q.reduce((acc, val) => acc + val, 0);

          sumPEl.textContent = `Soma P: ${sumP.toFixed(2)}`;
          sumQEl.textContent = `Soma Q: ${sumQ.toFixed(2)}`;

          if (Math.abs(sumP - 1) > 0.01 || Math.abs(sumQ - 1) > 0.01) {
            hellingerErrorEl.textContent =
              "A soma das probabilidades para cada distribui√ß√£o deve ser aproximadamente 1.";
            hellingerDistanceResultEl.textContent = "N/A";
            return;
          }

          if (p.some((val) => val < 0) || q.some((val) => val < 0)) {
            hellingerErrorEl.textContent =
              "Probabilidades n√£o podem ser negativas.";
            hellingerDistanceResultEl.textContent = "N/A";
            return;
          }

          let sum_sqrt_diff_sq = 0;
          for (let i = 0; i < p.length; i++) {
            sum_sqrt_diff_sq += (Math.sqrt(p[i]) - Math.sqrt(q[i])) ** 2;
          }

          const hellingerDistance =
            (1 / Math.sqrt(2)) * Math.sqrt(sum_sqrt_diff_sq);
          hellingerDistanceResultEl.textContent = hellingerDistance.toFixed(4);

          updateChart(p, q);
        }

        function updateChart(
          pValues = [0.3, 0.4, 0.3],
          qValues = [0.2, 0.5, 0.3]
        ) {
          if (hellingerChart) {
            hellingerChart.destroy();
          }

          hellingerChart = new Chart(ctx, {
            type: "bar",
            data: {
              labels: ["Bin 1", "Bin 2", "Bin 3"],
              datasets: [
                {
                  label: "Distribui√ß√£o P",
                  data: pValues,
                  backgroundColor: "rgba(59, 130, 246, 0.6)",
                  borderColor: "rgba(59, 130, 246, 1)",
                  borderWidth: 1,
                },
                {
                  label: "Distribui√ß√£o Q",
                  data: qValues,
                  backgroundColor: "rgba(16, 185, 129, 0.6)",
                  borderColor: "rgba(16, 185, 129, 1)",
                  borderWidth: 1,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: {
                  beginAtZero: true,
                  max: 1.0,
                  title: {
                    display: true,
                    text: "Probabilidade",
                  },
                },
                x: {
                  title: {
                    display: true,
                    text: "Bins",
                  },
                },
              },
              plugins: {
                tooltip: {
                  callbacks: {
                    label: function (context) {
                      let label = context.dataset.label || "";
                      if (label) {
                        label += ": ";
                      }
                      if (context.parsed.y !== null) {
                        label += context.parsed.y.toFixed(2);
                      }
                      return label;
                    },
                  },
                },
                legend: {
                  display: true,
                  position: "top",
                },
              },
            },
          });
        }

        [...pInputs, ...qInputs].forEach((input) => {
          input.addEventListener("input", calculateHellinger);
        });

        calculateHellinger();
      });
    </script>
    <script>
      MathJax = {
        tex: {
          inlineMath: [
            ["$", "$"],
            ["\\(", "\\)"],
          ],
          displayMath: [
            ["$$", "$$"],
            ["\\[", "\\]"],
          ],
        },
        svg: {
          fontCache: "global",
        },
      };
    </script>
    <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
    ></script>
<script>
// Simple script for dropdown toggle
const metricsMenuButton = document.getElementById('metrics-menu-button');
const metricsDropdown = document.getElementById('metrics-dropdown');
if (metricsMenuButton && metricsDropdown) {
    metricsMenuButton.addEventListener('click', () => {
        metricsDropdown.classList.toggle('hidden');
    });
    // Optional: Close dropdown if clicked outside
    document.addEventListener('click', (event) => {
        if (!metricsMenuButton.contains(event.target) && !metricsDropdown.contains(event.target)) {
            metricsDropdown.classList.add('hidden');
        }
    });
}
</script>
  </body>
</html>
